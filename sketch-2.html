<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Portrait Mastery | The Complete Course</title>
    <style>
        :root {
            --bg: #121212;
            --panel: #1e1e1e;
            --accent: #ffd700; /* Gold */
            --text-main: #e0e0e0;
            --text-muted: #a0a0a0;
            --border: #333;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* --- Sidebar Navigation --- */
        .app-container {
            display: grid;
            grid-template-columns: 260px 1fr;
            min-height: 100vh;
        }

        .sidebar {
            background: var(--panel);
            border-right: 1px solid var(--border);
            padding: 20px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-group { margin-bottom: 25px; }
        .nav-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .nav-item {
            display: block;
            width: 100%;
            text-align: left;
            background: none;
            border: none;
            color: var(--text-main);
            padding: 10px;
            cursor: pointer;
            border-radius: 6px;
            transition: 0.2s;
            margin-bottom: 5px;
        }

        .nav-item:hover { background: #333; }
        .nav-item.active { background: var(--accent); color: #000; font-weight: bold; }

        /* --- Main Content Area --- */
        .main-content { padding: 40px; overflow-y: auto; }

        .lesson-container { display: none; animation: fadeIn 0.4s ease; }
        .lesson-container.active { display: block; }

        .lesson-header { margin-bottom: 30px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
        .lesson-header h1 { margin: 0; font-size: 2.5rem; }
        .lesson-header p { color: var(--text-muted); font-size: 1.1rem; }

        /* --- Step-by-Step Layout --- */
        .step-block {
            background: var(--panel);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 40px;
            border: 1px solid var(--border);
        }

        .step-title {
            color: var(--accent);
            font-size: 1.4rem;
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .media-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

        .technique-card {
            background: #252525;
            padding: 15px;
            border-radius: 8px;
        }
        .technique-card img { width: 100%; border-radius: 6px; margin-bottom: 10px; }
        .technique-list li { margin-bottom: 8px; color: #ccc; }

        /* --- Virtual Studio --- */
        #studio-container {
            background: #222;
            padding: 10px;
            border-radius: 8px;
            position: relative;
        }
        .toolbar {
            display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap;
            background: #333; padding: 10px; border-radius: 6px;
        }
        .tool-btn {
            background: #444; border: none; color: white; padding: 8px 15px;
            border-radius: 4px; cursor: pointer;
        }
        .tool-btn.active { background: var(--accent); color: black; }
        
        canvas {
            background: white; width: 100%; height: 600px;
            border-radius: 4px; touch-action: none; cursor: crosshair;
        }

        /* --- AI Widget --- */
        #ai-widget {
            position: fixed; bottom: 20px; right: 20px; width: 320px;
            background: var(--panel); border: 2px solid var(--accent);
            border-radius: 12px; z-index: 100; overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            transition: transform 0.3s;
        }
        #chat-header {
            background: var(--accent); color: black; padding: 12px;
            font-weight: bold; cursor: pointer; display: flex; justify-content: space-between;
        }
        #chat-body { height: 300px; overflow-y: auto; padding: 15px; background: #2a2a2a; }
        .msg { padding: 8px 12px; border-radius: 8px; margin-bottom: 10px; font-size: 0.9rem; max-width: 80%; }
        .bot { background: #444; color: white; align-self: flex-start; }
        .user { background: var(--accent); color: black; margin-left: auto; }
        .input-area { display: flex; border-top: 1px solid #444; }
        .input-area input { flex: 1; padding: 12px; background: #333; border: none; color: white; outline: none; }
        .input-area button { background: #444; border: none; color: var(--accent); font-weight: bold; padding: 0 15px; cursor: pointer; }

        /* Responsive */
        @media (max-width: 768px) {
            .app-container { grid-template-columns: 1fr; }
            .sidebar { height: auto; position: relative; display: flex; overflow-x: auto; padding: 10px; gap: 10px; }
            .media-grid { grid-template-columns: 1fr; }
            canvas { height: 400px; }
            #ai-widget { width: 90%; right: 5%; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="app-container">
    <nav class="sidebar">
        <div class="logo">‚úèÔ∏è Portrait Pro</div>
        
        <div class="nav-group">
            <div class="nav-label">Level 1: The Basics</div>
            <button class="nav-item active" onclick="loadLesson('intro')">1. Tools & Lines</button>
            <button class="nav-item" onclick="loadLesson('loomis')">2. The Loomis Head</button>
        </div>

        <div class="nav-group">
            <div class="nav-label">Level 2: The Features</div>
            <button class="nav-item" onclick="loadLesson('eyes')">3. Realistic Eyes</button>
            <button class="nav-item" onclick="loadLesson('nose')">4. The Nose & Mouth</button>
        </div>

        <div class="nav-group">
            <div class="nav-label">Level 3: Rendering</div>
            <button class="nav-item" onclick="loadLesson('shading')">5. Shading & Light</button>
            <button class="nav-item" onclick="loadLesson('hair')">6. Hair Textures</button>
        </div>

        <div class="nav-group">
            <div class="nav-label">Practice</div>
            <button class="nav-item" onclick="loadLesson('studio')">üé® Virtual Studio</button>
        </div>
    </nav>

    <main class="main-content">
        
        <div id="intro" class="lesson-container active">
            <div class="lesson-header">
                <h1>Tools & Line Quality</h1>
                <p>Before drawing faces, you must master pencil control.</p>
            </div>

            <div class="step-block">
                <h3 class="step-title">Step 1: The Overhand Grip</h3>
                <div class="media-grid">
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/pMC0Cx3Uk84" allowfullscreen></iframe>
                    </div>
                    <div class="technique-card">
                        
                        <img src="https://images.unsplash.com/photo-1513364776144-60967b0f800f?w=600&q=80" alt="Pencil Grip Reference">
                        <ul class="technique-list">
                            <li><strong>Writing Grip:</strong> Good for details (eyes, texture).</li>
                            <li><strong>Overhand Grip:</strong> Best for long lines and initial head shapes.</li>
                            <li><strong>Shoulder Movement:</strong> Draw with your shoulder, not your wrist, for smoother circles.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div id="loomis" class="lesson-container">
            <div class="lesson-header">
                <h1>The Loomis Method</h1>
                <p>The industry standard for constructing heads from any angle.</p>
            </div>

            <div class="step-block">
                <h3 class="step-title">Step 1: The Sphere & The Cross</h3>
                <div class="media-grid">
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/wAOldLWIDSM" allowfullscreen></iframe>
                    </div>
                    <div class="technique-card">
                        
                        <img src="https://placehold.co/600x400/222/FFF?text=Diagram:+Side+Cuts+of+Sphere" alt="Loomis Sphere">
                        <p><strong>The Recipe:</strong></p>
                        <ol class="technique-list">
                            <li>Draw a perfect circle.</li>
                            <li>Slice off the sides (like slicing an orange).</li>
                            <li>Draw a cross on the side plane to determine the angle of the face.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <div id="eyes" class="lesson-container">
            <div class="lesson-header">
                <h1>Mastering Eyes</h1>
                <p>Eyes are the focal point of any portrait.</p>
            </div>

            <div class="step-block">
                <h3 class="step-title">Step 1: The Eyeball Concept</h3>
                <p>Don't draw an almond. Draw a ball wrapped in skin.</p>
                <div class="media-grid">
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/P6aD133bO7s" allowfullscreen></iframe>
                    </div>
                    <div class="technique-card">
                         

[Image of eye anatomy diagram showing tear duct and eyelids]

                        <img src="https://images.unsplash.com/photo-1597223592717-b454581cc130?w=600&q=80" alt="Eye Reference">
                        <ul class="technique-list">
                            <li><strong>The Tear Duct:</strong> It's not part of the curve; it's a separate fleshy bump.</li>
                            <li><strong>Thickness:</strong> Eyelids have thickness. Draw the "waterline" (the rim between lashes and eye).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div id="nose" class="lesson-container">
            <div class="lesson-header">
                <h1>Nose & Mouth Structure</h1>
            </div>
            
            <div class="step-block">
                <h3 class="step-title">The Nose: No Lines allowed!</h3>
                <div class="media-grid">
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/9BqF3i1K0i0" allowfullscreen></iframe>
                    </div>
                    <div class="technique-card">
                         
                        <img src="https://placehold.co/600x400/222/FFF?text=Diagram:+Nose+Planes" alt="Nose Planes">
                        <p>The nose is defined by shadow shapes, not outlines. Focus on the core shadow at the bottom.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="shading" class="lesson-container">
            <div class="lesson-header">
                <h1>Shading & Rendering</h1>
                <p>Turning a 2D sketch into a 3D reality.</p>
            </div>

            <div class="step-block">
                <h3 class="step-title">The 5-Value System</h3>
                <div class="media-grid">
                    <div class="video-wrapper">
                        <iframe src="https://www.youtube.com/embed/V3WmrBOWPdE" allowfullscreen></iframe>
                    </div>
                    <div class="technique-card">
                        
                        <img src="https://placehold.co/600x400/222/FFF?text=Diagram:+Sphere+Lighting" alt="Shading Logic">
                        <ul class="technique-list">
                            <li><strong>Highlight:</strong> Where light hits directly.</li>
                            <li><strong>Core Shadow:</strong> The darkest band on the form.</li>
                            <li><strong>Reflected Light:</strong> Light bouncing back into the shadow (crucial for realism).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div id="studio" class="lesson-container">
            <div class="lesson-header">
                <h1>Virtual Sketchpad</h1>
                <p>Practice what you learned instantly. Works on Touch & Mouse.</p>
            </div>
            
            <div id="studio-container">
                <div class="toolbar">
                    <button class="tool-btn active" onclick="setTool('pencil')">‚úèÔ∏è HB Pencil</button>
                    <button class="tool-btn" onclick="setTool('charcoal')">dark 6B Pencil</button>
                    <button class="tool-btn" onclick="setTool('eraser')">üßº Eraser</button>
                    <button class="tool-btn" onclick="toggleGrid()">OFF Grid</button>
                    <button class="tool-btn" onclick="clearCanvas()" style="background:#d32f2f;">üóë Clear</button>
                    <button class="tool-btn" onclick="downloadSketch()" style="background:#388e3c;">üíæ Save</button>
                </div>
                <canvas id="drawing-board"></canvas>
            </div>
        </div>

    </main>
</div>

<div id="ai-widget">
    <div id="chat-header" onclick="toggleChat()">
        <span>ü§ñ Art Mentor AI</span>
        <span>‚ñº</span>
    </div>
    <div id="chat-body">
        <div class="msg bot">Hi! I can guide you. Try asking: "How do I draw hair?", "My drawing looks flat", or "What are planes?"</div>
    </div>
    <div class="input-area">
        <input type="text" id="ai-input" placeholder="Ask about techniques..." onkeypress="handleEnter(event)">
        <button onclick="askAI()">Send</button>
    </div>
</div>

<script>
    // --- NAVIGATION LOGIC ---
    function loadLesson(id) {
        document.querySelectorAll('.lesson-container').forEach(l => l.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        event.target.classList.add('active');

        if(id === 'studio') {
            setTimeout(resizeCanvas, 100);
        }
    }

    // --- CANVAS LOGIC ---
    const canvas = document.getElementById('drawing-board');
    const ctx = canvas.getContext('2d');
    let painting = false;
    let tool = 'pencil';
    let showGrid = false;

    function resizeCanvas() {
        const parent = document.getElementById('studio-container');
        canvas.width = parent.clientWidth - 20;
        canvas.height = 600;
        ctx.fillStyle = "white";
        ctx.fillRect(0,0,canvas.width, canvas.height);
        if(showGrid) drawGridLines();
    }

    function startPos(e) {
        painting = true;
        draw(e);
    }
    function endPos() {
        painting = false;
        ctx.beginPath();
    }
    function draw(e) {
        if(!painting) return;
        e.preventDefault();
        
        // Coordinates
        const rect = canvas.getBoundingClientRect();
        let x, y;
        if(e.touches) {
            x = e.touches[0].clientX - rect.left;
            y = e.touches[0].clientY - rect.top;
        } else {
            x = e.clientX - rect.left;
            y = e.clientY - rect.top;
        }

        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        if(tool === 'pencil') {
            ctx.strokeStyle = 'rgba(40, 40, 40, 0.6)'; // Graphite look
            ctx.lineWidth = 2;
        } else if (tool === 'charcoal') {
            ctx.strokeStyle = 'rgba(10, 10, 10, 0.9)'; // Dark charcoal
            ctx.lineWidth = 5;
        } else if (tool === 'eraser') {
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 20;
        }

        ctx.lineTo(x, y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(x, y);
    }

    function toggleGrid() {
        showGrid = !showGrid;
        const btn = event.target;
        btn.innerText = showGrid ? "ON Grid" : "OFF Grid";
        // Note: Real implementation would require layers to not clear drawing
        // For simple version, we warn or just overlay. 
        // Here we just redraw grid on empty for simplicity or alert user.
        if(showGrid) drawGridLines();
    }

    function drawGridLines() {
        ctx.strokeStyle = '#ddd';
        ctx.lineWidth = 1;
        for(let x=0; x<canvas.width; x+=50) { ctx.moveTo(x,0); ctx.lineTo(x, canvas.height); }
        for(let y=0; y<canvas.height; y+=50) { ctx.moveTo(0,y); ctx.lineTo(canvas.width, y); }
        ctx.stroke();
        ctx.beginPath();
    }

    function clearCanvas() {
        ctx.fillStyle = "white";
        ctx.fillRect(0,0,canvas.width, canvas.height);
        if(showGrid) drawGridLines();
    }

    function downloadSketch() {
        const link = document.createElement('a');
        link.download = 'portrait-sketch.png';
        link.href = canvas.toDataURL();
        link.click();
    }

    function setTool(t) {
        tool = t;
        document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
        event.target.classList.add('active');
    }

    // Events
    canvas.addEventListener('mousedown', startPos);
    canvas.addEventListener('mouseup', endPos);
    canvas.addEventListener('mousemove', draw);
    canvas.addEventListener('touchstart', startPos);
    canvas.addEventListener('touchend', endPos);
    canvas.addEventListener('touchmove', draw);
    window.addEventListener('resize', resizeCanvas);
    
    // --- AI MENTOR LOGIC (ENHANCED) ---
    const knowledge = {
        "flat": "If your drawing looks flat, you are likely focusing too much on outlines. Real life has no outlines! Focus on SHADOW SHAPES. Where is your core shadow? Is your highlight bright enough?",
        "eye": "Remember: The eyeball is a sphere. The eyelid has thickness (the waterline). Don't forget the tear duct is a separate shape!",
        "nose": "Do not draw a line for the side of the nose. Indicate the nose by drawing the shadow underneath it and the shadow of the eye socket.",
        "loomis": "Andrew Loomis method: Start with a sphere. Slice off the sides. Divide the face into thirds: Hairline to Brow, Brow to Nose, Nose to Chin.",
        "hair": "Treat hair as large masses or 'ribbons'. Do not draw individual strands until the very end. Shade the overall shape first.",
        "lips": "The top lip is usually facing down, so it's darker. The bottom lip faces up and catches light. Darkest points are the corners of the mouth.",
        "shading": "Use the 5-value scale: Highlight, Mid-tone, Core Shadow, Reflected Light, Cast Shadow. If you miss reflected light, it won't look 3D.",
        "grid": "Using a grid helps break down complex images into manageable squares. It trains your eye to see negative space.",
        "default": "I'm here to help with 'eyes', 'shading', 'hair', 'lips', or 'structure'. What are you working on?"
    };

    function askAI() {
        const input = document.getElementById('ai-input');
        const text = input.value.toLowerCase();
        if(!text) return;

        addMsg(input.value, 'user');
        input.value = '';

        setTimeout(() => {
            let reply = knowledge.default;
            if(text.includes('flat') || text.includes('2d')) reply = knowledge.flat;
            else if(text.includes('eye')) reply = knowledge.eye;
            else if(text.includes('nose')) reply = knowledge.nose;
            else if(text.includes('hair')) reply = knowledge.hair;
            else if(text.includes('lip') || text.includes('mouth')) reply = knowledge.lips;
            else if(text.includes('shade') || text.includes('shadow')) reply = knowledge.shading;
            else if(text.includes('loomis') || text.includes('head')) reply = knowledge.loomis;
            else if(text.includes('grid')) reply = knowledge.grid;
            
            addMsg(reply, 'bot');
        }, 500);
    }

    function addMsg(txt, type) {
        const div = document.createElement('div');
        div.className = `msg ${type}`;
        div.innerText = txt;
        const body = document.getElementById('chat-body');
        body.appendChild(div);
        body.scrollTop = body.scrollHeight;
    }

    function handleEnter(e) { if(e.key === 'Enter') askAI(); }
    
    function toggleChat() {
        const w = document.getElementById('ai-widget');
        w.style.bottom = w.style.bottom === '-340px' ? '20px' : '-340px';
    }

    // Init
    window.onload = () => {
        resizeCanvas();
        addMsg("Welcome! I'm your AI Sketching Coach. Ask me anything!", 'bot');
    };
</script>

</body>
</html>